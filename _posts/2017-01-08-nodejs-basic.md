---
layout: post
title: "Node.js 개념 정리"
date: 2017-01-08
categories: Nodejs
author: leop0ld
---

# Node.js 개념 정리
> velopert님의 블로그를 많이 참고하였습니다.

일단 Node.js 는 **언어도 아니고 웹서버도 아니다**.
Node.js 는 크롬의 V8 엔진을 기반으로 만들어진 **서버 사이드 플랫폼** 이다.
Node.js 공식 사이트에서는 이렇게 소개를 한다.

```
Node.js®는 Chrome V8 JavaScript 엔진으로 빌드된 JavaScript 런타임입니다.
Node.js는 이벤트 기반, 논 블로킹 I/O 모델을 사용해 가볍고 효율적입니다.
Node.js의 패키지 생태계인 npm은 세계에서 가장 큰 오픈 소스 라이브러리 생태계이기도 합니다.
```

Node.js 는 **그냥 자바스크립트 런타임** 일 뿐이다.

# Node.js 특징

### 0. REPL 터미널

REPL(Read Eval Print Loop) 의 약자로써 python의 인터프리터 같은 것이다.
커맨드를 입력하면 값을 반환해주는 환경이다.
각 역할은 이렇다.

- Read: 유저의 값을 입력 받아 JavaScript 데이터 구조로 메모리에 저장한다.

- Eval: 데이터를 처리한다.

- Print: 결과값을 출력한다.

- Loop: Read, Eval, Print 를 유저가 Ctrl+C를 두 번 눌러 종료할 때까지 반복한다.

### 1. Non-blocking

Callback 함수를 사용하여 이렇게 프로그램의 흐름을 끊지 않음으로서,
Non-Blocking 코드를 사용하는 서버는 Blocking 코드를 사용하는 서버보다
더 많은 양의 요청을 빠르게 처리 할 수 있다.

### 2. Event Driven

Node.js 에서는 서버가 실행되면 코드를 실행하고, 이벤트가 발생할 때까지 기다린다.
이벤트 위주 (Event-Driven) 어플리케이션에서는, 이벤트를 대기하는 메인 루프가 있다.
그리고 이벤트가 감지되었을 때 Callback 함수를 호출한다.

이 방식이 Non-blocking, 즉 Callback과 무엇이 다르냐하면 이벤트의 경우에는 이벤트 핸들링이 옵저버 패턴에 의해 일어난다.
Node.js의 경우 events 모듈을 사용할 때 events.EventEmitter 라는 내장된 클래스를 사용할 수 있다.
EventEmitter를 이용해서 이벤트를 발생시킬 수도 있다.


# Node.js 단점

사실 위에 말한 특징들이 Node.js의 장점이 아닐까 싶다. 비동기식 처리, 이벤트 위주 등등 속도가 빠를 수 밖에 없다.

그러면 속도를 취했을 때 일어날 수 있는 부작용을 좀 보려고 한다. 항상 어떤 것을 배울 때에는 양쪽면을 모두 보려고 노력한다. 노력해도 안 보이는 면이 있기 마련이지만 말이다.

이 부분은 조대협님의 블로그에 매우 정리가 잘 되어있다. 그 링크를 첨부하고 조금 읽어봄직한 이야기는 아래에서 참조하겠다. 약간의 수정이 있을 수 있다.

"본적으로 Single thread 모델이기 때문에, 하나의 작업 자체가 시간이 많이 걸리면, 전체 시스템의 성능이 아주 급격하게 떨어진다. 그리고 자바스크립트에서 오는 문제점은 다른 언어에 비해서 명시성이 떨어지기 때문에, 코드의 가독성이 다른 언어에 비해서 상대적으로 낮기 때문에 유지 보수가 어려워질 수 있으며, 이벤트 Call back 을 형태를 기준으로 하기 때문에, 이러한 call back이 중첩될 경우 (이를 **callback hell**이라고 한다.) 코드의 가독성이 급격하게 떨어진다.

또한 자바스크립트와 같은 스크립트 언어의 특성상 해당 코드가 수행이 되어야 코드에서 에러가 나는지를 확인할 수 있고, 에러가 날 경우 프로세스 자체가 내려가기 때문에, node.js 를 사용하는 사람들에게 가장 많이 들려오는 단점이 “**잘 죽어요**”이다."

> 조대협님의 [글](http://bcho.tistory.com/876) 중 일부


# 이러한 Node.js 를 내가 선택한 이유

정말 간단하다.
난 프론트 JS 라이브러리 or 프레임워크 쪽에 관심이 많다.
프론트를 JS로 썼는데 백엔드를 django로 쓰자니 뭔가 찝찝하고 내가 이럴려고 JS를 썼나 자괴감 들고 괴로울 것 같아서 과감히 Express를 배워보려고 하는 중이다. 요즘 **Hubot** 이라는 Github에서 제공하는 라이브러리를 좀 써보는 중인데 매우 만족스럽다. 이 라이브러리 또한 "CoffeeScript" 로 작성되었으며, adapter를 슬랙으로 사용해서 회사 슬랙봇으로 이용하고 있다. 아직은 기능이 많이 없다 ㅠㅠ 


# 앞으로 진행하게 될 것들

앞으로는 위에서 말했던 **프론트 JS 라이브러리 or 프레임워크** 들을 써봄과 동시에 Express로 백엔드를 구성해볼 것이다.
그리고 어느 정도 개념을 다 잡으면 실제 프로젝트를 진행해보면서 몸으로 체험해볼 생각이다! JS를 잘하게 되는 그 날까지 열심히 해야겠다.
